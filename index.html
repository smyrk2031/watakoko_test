<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Çè„Åü„Åì„ÅìÔºÅver0.1.4</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.js"></script>
    <link href="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.css" rel="stylesheet" />
</head>
<body>
    <!-- „Éè„É≥„Éê„Éº„Ç¨„Éº„É°„Éã„É•„Éº„Éú„Çø„É≥ -->
    <button id="hamburger-btn" class="hamburger-btn">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <!-- „Çµ„Ç§„Éâ„Éê„Éº -->
    <div id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <h2>„É°„Éã„É•„Éº</h2>
        </div>
        <nav class="sidebar-nav">
            <a href="#" id="nav-main" class="nav-item active">„É°„Ç§„É≥ÁîªÈù¢</a>
            <a href="#" id="nav-settings" class="nav-item">„É¶„Éº„Ç∂„ÉºË®≠ÂÆö</a>
            <a href="#" id="nav-map" class="nav-item">„Éû„ÉÉ„ÉóÁîªÈù¢</a>
        </nav>
    </div>

    <!-- „Ç™„Éº„Éê„Éº„É¨„Ç§ -->
    <div id="overlay" class="overlay"></div>

    <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„Éä -->
    <div id="main-container" class="main-container">
        
        <!-- „É¶„Éº„Ç∂„ÉºË®≠ÂÆöÁîªÈù¢ -->
        <div id="user-settings-screen" class="screen">
            <div class="screen-header">
                <h1>„É¶„Éº„Ç∂„ÉºË®≠ÂÆö</h1>
                <div class="header-decoration"></div>
            </div>
            
            <div class="settings-form">
                <div class="form-group">
                    <label for="username">„É¶„Éº„Ç∂„ÉºÂêçÔºàÊúÄÂ§ß20ÊñáÂ≠óÔºâ</label>
                    <input type="text" id="username" maxlength="20" placeholder="„ÅäÂêçÂâç„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ">
                </div>
                
                <div class="form-group">
                    <label for="user-id">IDÔºà7Ê°ÅÊï∞Â≠óÔºâ</label>
                    <input type="number" id="user-id" maxlength="7" placeholder="1234567" pattern="[0-9]{7}">
                </div>
                
                <div class="form-group">
                    <label for="user-group">„Ç∞„É´„Éº„Éó</label>
                    <select id="user-group">
                        <option value="Âñ∂Ê•≠ÈÉ®">Âñ∂Ê•≠ÈÉ®</option>
                        <option value="ÈñãÁô∫ÈÉ®">ÈñãÁô∫ÈÉ®</option>
                        <option value="ÁÆ°ÁêÜÈÉ®">ÁÆ°ÁêÜÈÉ®</option>
                        <option value="AÊ£ü„É¶„Éº„Ç∂„Éº">AÊ£ü„É¶„Éº„Ç∂„Éº</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="user-icon">„Ç¢„Ç§„Ç≥„É≥ÁîªÂÉè</label>
                    
                    <!-- „Éá„Éï„Ç©„É´„Éà„Ç¢„Ç§„Ç≥„É≥ÈÅ∏Êäû -->
                    <div class="default-icons-section">
                        <h4>„Éá„Éï„Ç©„É´„Éà„Ç¢„Ç§„Ç≥„É≥„ÇíÈÅ∏Êäû</h4>
                        <div class="default-icons-grid">
                            <div class="default-icon-item" data-icon="person">
                                <svg width="40" height="40" viewBox="0 0 40 40">
                                    <circle cx="20" cy="12" r="6" fill="#4ECDC4"/>
                                    <path d="M8 32c0-6.627 5.373-12 12-12s12 5.373 12 12" fill="#4ECDC4"/>
                                </svg>
                                <span>‰∫∫Áâ©</span>
                            </div>
                            <div class="default-icon-item" data-icon="star">
                                <svg width="40" height="40" viewBox="0 0 40 40">
                                    <path d="M20 4l4.9 9.9 10.9 1.6-7.9 7.7 1.9 10.8L20 29.8 10.2 34l1.9-10.8L4.2 15.5l10.9-1.6z" fill="#FFD700"/>
                                </svg>
                                <span>Êòü</span>
                            </div>
                            <div class="default-icon-item" data-icon="heart">
                                <svg width="40" height="40" viewBox="0 0 40 40">
                                    <path d="M20 35c-1.1 0-2-.9-2-2 0-.6.2-1.1.6-1.5L32 18c2.2-2.2 2.2-5.8 0-8s-5.8-2.2-8 0L20 14 16 10c-2.2-2.2-5.8-2.2-8 0s-2.2 5.8 0 8l13.4 13.5c.4.4.6.9.6 1.5 0 1.1-.9 2-2 2z" fill="#FF6B6B"/>
                                </svg>
                                <span>„Éè„Éº„Éà</span>
                            </div>
                            <div class="default-icon-item" data-icon="flower">
                                <svg width="40" height="40" viewBox="0 0 40 40">
                                    <circle cx="20" cy="20" r="4" fill="#98D8C8"/>
                                    <ellipse cx="20" cy="10" rx="3" ry="6" fill="#98D8C8"/>
                                    <ellipse cx="30" cy="20" rx="6" ry="3" fill="#98D8C8"/>
                                    <ellipse cx="20" cy="30" rx="3" ry="6" fill="#98D8C8"/>
                                    <ellipse cx="10" cy="20" rx="6" ry="3" fill="#98D8C8"/>
                                </svg>
                                <span>Ëä±</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="or-divider">„Åæ„Åü„ÅØ</div>
                    
                    <!-- „Ç´„Çπ„Çø„É†„Ç¢„Ç§„Ç≥„É≥„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ -->
                    <div class="icon-upload-area" id="icon-upload-area">
                        <div class="upload-text">
                            <p>üì∑ ÁîªÂÉè„Çí„Éâ„É©„ÉÉ„Ç∞ÔºÜ„Éâ„É≠„ÉÉ„Éó</p>
                            <p>üìã ÁîªÂÉè„Çí„Ç≥„Éî„Éº„Åó„Å¶Ctrl+V„ÅßË≤º„Çä‰ªò„Åë</p>
                            <button type="button" class="file-select-btn">„Éï„Ç°„Ç§„É´„ÇíÈÅ∏Êäû</button>
                        </div>
                        <input type="file" id="user-icon" accept=".jpg,.jpeg,.png,.ico" style="display: none;">
                        <div class="preview-area" id="preview-area" style="display: none;">
                            <div class="icon-preview-circle">
                                <img id="icon-preview" src="" alt="„Ç¢„Ç§„Ç≥„É≥„Éó„É¨„Éì„É•„Éº">
                            </div>
                        </div>
                    </div>
                </div>
                
                <button id="save-settings-btn" class="primary-btn">Ë®≠ÂÆö„Çí‰øùÂ≠ò</button>
            </div>
        </div>

        <!-- „É°„Ç§„É≥ÁîªÈù¢ -->
        <div id="main-screen" class="screen">
            <div class="screen-header">
                <div class="header-character-container">
                    <div class="header-character left-character">
                        <img src="charactor_img_01.png" alt="„Çè„Åü„Åì" class="character-img">
                    </div>
                    <button id="location-btn" class="location-btn header-location-btn">
                        <span class="btn-icon">üìç</span>
                        ÁßÅ„ÅØ„Åì„Åì„Å´„ÅÑ„ÇãÔºÅ
                    </button>
                    <div class="header-character right-character">
                        <img src="charactor_img_01.png" alt="„Çè„Åü„Åì" class="character-img">
                    </div>
                </div>
                <div class="header-decoration"></div>
            </div>
            
            <div class="main-content">
                <div class="location-section">
                    <!-- ÂÖÉ„ÅÆ„Éú„Çø„É≥„ÅØÂâäÈô§ -->
                    
                    <div id="location-result" class="location-result" style="display: none;">
                        <div class="current-building">
                            <h3 id="building-name">Âª∫Áâ©Âêç</h3>
                        </div>
                        
                        <div class="floor-selection" id="floor-selection" style="display: none;">
                            <h4>ÈöéÂ±§„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</h4>
                            <div id="floor-buttons" class="floor-buttons"></div>
                        </div>
                        
                        <div class="room-selection" id="room-selection" style="display: none;">
                            <h4>ÈÉ®Â±ã„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</h4>
                            <div id="room-list" class="room-list"></div>
                        </div>
                        
                        <button id="register-location-btn" class="primary-btn" style="display: none;">
                            ‰ΩçÁΩÆ„ÇíÁôªÈå≤
                        </button>
                    </div>
                </div>
                
                <div class="map-container">
                    <div class="map-controls">
                        <button id="toggle-buildings-btn" class="control-btn">Âª∫Áâ©ÁØÑÂõ≤Ë°®Á§∫</button>
                        <button id="toggle-members-btn" class="control-btn">„Åø„Çì„Å©„ÅìÔºü</button>
                        <div class="group-filter" id="group-filter" style="display: none;">
                            <select id="group-select">
                                <option value="all">ÂÖ®„Å¶Ë°®Á§∫</option>
                                <option value="Âñ∂Ê•≠ÈÉ®">Âñ∂Ê•≠ÈÉ®</option>
                                <option value="ÈñãÁô∫ÈÉ®">ÈñãÁô∫ÈÉ®</option>
                                <option value="ÁÆ°ÁêÜÈÉ®">ÁÆ°ÁêÜÈÉ®</option>
                                <option value="AÊ£ü„É¶„Éº„Ç∂„Éº">AÊ£ü„É¶„Éº„Ç∂„Éº</option>
                            </select>
                        </div>
                    </div>
                    <div id="map" class="map"></div>
                </div>
                
                <!-- ÊâãÂãï‰ΩçÁΩÆÂÖ•Âäõ - „Éû„ÉÉ„Éó„ÅÆ‰∏ã„Å´ÈÖçÁΩÆ -->
                <div id="manual-location-input" class="manual-location-input" style="display: none;">
                    <div class="manual-input-header">
                        <h3>üìç ÊâãÂãï„ÅßÂ†¥ÊâÄ„ÇíÂÖ•Âäõ</h3>
                        <p>Âª∫Áâ©„ÅÆÁØÑÂõ≤Â§ñ„Å´„ÅÑ„Çã„Åü„ÇÅ„ÄÅÂ†¥ÊâÄ„ÇíÊâãÂãï„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>
                    </div>
                    
                    <div class="manual-input-field">
                        <label for="manual-location-text">Â†¥ÊâÄÂêç</label>
                        <input type="text" id="manual-location-text" placeholder="‰æãÔºö„Ç´„Éï„Çß‚óã‚óã„ÄÅÂÖ¨Âúí„ÄÅËá™ÂÆÖ„Å™„Å©" maxlength="50">
                    </div>
                    
                    <button id="register-manual-location-btn" class="primary-btn">
                        ÊâãÂãï„Åß‰ΩçÁΩÆ„ÇíÁôªÈå≤
                    </button>
                </div>
            </div>
        </div>

        <!-- „Éû„ÉÉ„ÉóÁîªÈù¢ -->
        <div id="map-screen" class="screen" style="display: none;">
            <div class="screen-header">
                <h1>„Éû„ÉÉ„Éó</h1>
                <div class="header-decoration"></div>
            </div>
            
            <div class="map-section">
                <div class="full-map-container">
                    <div class="map-controls">
                        <button id="map-toggle-buildings-btn" class="control-btn">Âª∫Áâ©ÁØÑÂõ≤Ë°®Á§∫</button>
                        <button id="map-toggle-members-btn" class="control-btn">„Åø„Çì„Å©„ÅìÔºü</button>
                        <div class="group-filter" id="map-group-filter" style="display: none;">
                            <select id="map-group-select">
                                <option value="all">ÂÖ®„Å¶Ë°®Á§∫</option>
                                <option value="Âñ∂Ê•≠ÈÉ®">Âñ∂Ê•≠ÈÉ®</option>
                                <option value="ÈñãÁô∫ÈÉ®">ÈñãÁô∫ÈÉ®</option>
                                <option value="ÁÆ°ÁêÜÈÉ®">ÁÆ°ÁêÜÈÉ®</option>
                                <option value="AÊ£ü„É¶„Éº„Ç∂„Éº">AÊ£ü„É¶„Éº„Ç∂„Éº</option>
                            </select>
                        </div>
                    </div>
                    
                    <div id="full-map-container-wrapper" style="position: relative;">
                        <div id="full-map" class="full-map"></div>
                    </div>
                </div>
                
                <!-- ÊâãÂãï‰ΩçÁΩÆÂÖ•Âäõ - „Éû„ÉÉ„Éó„ÅÆ‰∏ã„Å´ÈÖçÁΩÆ -->
                <div id="map-manual-location-input" class="manual-location-input map-manual-input" style="display: none;">
                    <div class="manual-input-header">
                        <h3>üìç ÊâãÂãï„ÅßÂ†¥ÊâÄ„ÇíÂÖ•Âäõ</h3>
                        <p>Âª∫Áâ©„ÅÆÁØÑÂõ≤Â§ñ„Å´„ÅÑ„Çã„Åü„ÇÅ„ÄÅÂ†¥ÊâÄ„ÇíÊâãÂãï„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>
                    </div>
                    
                    <div class="manual-input-field">
                        <label for="map-manual-location-text">Â†¥ÊâÄÂêç</label>
                        <input type="text" id="map-manual-location-text" placeholder="‰æãÔºö„Ç´„Éï„Çß‚óã‚óã„ÄÅÂÖ¨Âúí„ÄÅËá™ÂÆÖ„Å™„Å©" maxlength="50">
                    </div>
                    
                    <div class="manual-input-buttons">
                        <button id="map-register-manual-location-btn" class="primary-btn">
                            ÊâãÂãï„Åß‰ΩçÁΩÆ„ÇíÁôªÈå≤
                        </button>
                        <button id="map-close-manual-input-btn" class="secondary-btn">
                            „Ç≠„É£„É≥„Çª„É´
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‰ΩçÁΩÆÁôªÈå≤ÁîªÈù¢ -->
        <div id="location-screen" class="screen" style="display: none;">
            <div class="screen-header">
                <h1>‰ΩçÁΩÆÁôªÈå≤</h1>
                <div class="header-decoration"></div>
            </div>
            
            <div id="map-container">
                <div id="map"></div>
            </div>
            
            <div class="location-section">
                <button id="get-location-btn" class="primary-btn">
                    üìç ÁßÅ„ÅØ„Åì„Åì„Å´„ÅÑ„ÇãÔºÅ
                </button>
                
                <div id="building-selection" style="display: none;">
                    <div class="selection-group">
                        <label>Âª∫Áâ©:</label>
                        <select id="building-select">
                            <option value="">Âª∫Áâ©„ÇíÈÅ∏Êäû</option>
                        </select>
                    </div>
                    
                    <div class="selection-group">
                        <label>„Éï„É≠„Ç¢:</label>
                        <select id="floor-select" disabled>
                            <option value="">„Éï„É≠„Ç¢„ÇíÈÅ∏Êäû</option>
                        </select>
                    </div>
                    
                    <div class="selection-group">
                        <label>ÈÉ®Â±ã:</label>
                        <select id="room-select" disabled>
                            <option value="">ÈÉ®Â±ã„ÇíÈÅ∏Êäû</option>
                        </select>
                    </div>
                    
                    <button id="register-location-btn" class="primary-btn" disabled>
                        ‰ΩçÁΩÆ„ÇíÁôªÈå≤
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- „É°„É≥„Éê„ÉºË©≥Á¥∞„Éù„ÉÉ„Éó„Ç¢„ÉÉ„Éó -->
    <div id="member-popup" class="member-popup" style="display: none;">
        <div class="popup-content">
            <button class="popup-close">&times;</button>
            <div class="member-info">
                <img id="popup-icon" src="" alt="„Ç¢„Ç§„Ç≥„É≥">
                <div class="member-details">
                    <h3 id="popup-username">„É¶„Éº„Ç∂„ÉºÂêç</h3>
                    <p id="popup-status">„Çπ„ÉÜ„Éº„Çø„Çπ</p>
                    <p id="popup-location">‰ΩçÁΩÆÊÉÖÂ†±</p>
                    <p id="popup-note">„É°„É¢</p>
                    <p id="popup-timestamp">Êõ¥Êñ∞ÊôÇÂàª</p>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> 